<!-- <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script> -->

<div id="app">
</div>

<body>
    <button id="btn">点击</button>

    <script>
        const data = {
            message: 'Hello Vue!',
            list: [1, 2, 3]
        }

        // 定义观察者函数
        function defineReactive(obj) {
            Object.keys(obj).forEach(key => {
                let value = obj[key]
                Object.defineProperty(obj, key, {
                    get() {
                        console.log(`获取${key}属性`)
                        return value
                    },
                    set(newValue) {
                        console.log(`设置${key}属性为: ${newValue}`)
                        value = newValue
                    }
                })
                if (typeof value === 'object') {
                    defineReactive(value)
                }
            })
        }
        const handle = () => {
            console.log('handle');
            data.list.push(4)
            console.log(data.list);
        }
        defineReactive(data)
        document.getElementById('btn').addEventListener('click', handle)
    </script>
</body>



</html>